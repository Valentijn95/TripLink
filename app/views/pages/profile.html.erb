<div class="basic-padding">

  <!-- if user is not signed in, show the login button -->
  <% if !user_signed_in? %>
      <p> <%= link_to "Log in", new_user_session_path, class: "btn btn-outline-primary" %></p>

  <!-- if user is signed in, show the profile page -->
  <% else %>

    <br>
    <div class="d-flex pb-4 border-bottom justify-content-between">
      <div class="d-flex align-items-center">
        <% if @user.photo.key != nil %>
          <%= cl_image_tag(@user.photo.key, height: 75, width: 75, gravity: "faces", crop: "fill", class: "rounded-circle") %>
        <% end %>
        <h1 class="ms-3"> <%= @user.name%> </h1>
      </div>
      <div class="d-flex align-items-center">
        <% if @user.guide == false || @user.guide == nil %>
          <%= button_to "Apply to be a guide", new_guide_path(@user), method: :get, class: "btn btn-outline-primary mb-2" %>
        <% end %>
      </div>
    </div>

    <div class="border-bottom pt-4 pb-4">
      <h2 class="mb-3">Your interests</h2>
      <div class="interests-container">
        <% @user.interests.sort_by(&:interest).each do |interest| %>
            <div class="interest-profile align-items-center">
            <span class="me-2"><%= interest.interest %></span>
            <%= button_to 'â“§', remove_interest_path(interest_id: interest.id), method: :delete, class: 'btn-delete' %>
          </div>
        <% end %>
      </div>
      <% if @available_interests.any? %>
        <%= form_with url: add_interest_path, method: :post do |f| %>
        <p>Want to add an interest to your profile?</p>
        <div class="input-button-group">
          <%= f.collection_select :interest_id, @available_interests.sort_by(&:interest), :id, :interest, { prompt: "Select interest"}, class: 'input-field' %>
          <%= f.submit "Add", class: "submit-button" %>
        </div>
        <% end %>
      <% end %>
    </div>


    <br>

    <% if @user.guide == true %>
      <h2 class="mb-3">Your guide locations</h2>
      <ul>
        <% @user.locations.each do |location| %>
          <li><%= location.name %>, <%= location.city %></li>
        <% end %>
      </ul>
    <% end %>

      <%= link_to "Edit profile", edit_user_registration_path, class: "col-5 btn btn-outline-primary mb-2" %>

      <%= button_to "Log out", destroy_user_session_path, method: :delete, class: "col-5 btn btn-outline-warning mb-2" %>

  <% end %>
</div>
